</div>

<footer id="ft">
	<small>Copyright &copy; 2013 david-dm.org</small>
	<div>
		<ul>
			<li><a href="https://github.com/alanshaw/david-www"><i class="icon-github"></i> GitHub</a></li>
			<li><a href="https://github.com/alanshaw/david-www/graphs/contributors"><i class="icon-user"></i> Contributors</a></li>
			<li><a href="https://github.com/alanshaw/david-www/issues"><i class="icon-warning-sign"></i> Issues</a></li>
			<li><a href="/stats"><i class="icon-bar-chart"></i> Stats</a></li>
			<li><a href="http://davidiswatching.tumblr.com/"><i class="icon-book"></i> Blog</a></li>
		</ul>
		<ul class="social">
			<li>
				<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://david-dm.org" data-text="David, a new dependency management tool for #Nodejs projects" data-count="none">Tweet</a>
				<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
			</li>
			<li>
				<div class="g-plusone" data-size="medium" data-annotation="none" data-href="https://david-dm.org"></div>
				<script>
				  window.___gcfg = {lang: 'en-GB'};
				
				  (function() {
					var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
					po.src = 'https://apis.google.com/js/plusone.js';
					var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
				  })();
				</script>
			</li>
		</ul>
	</div>
</footer>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/vendor/jquery-1.9.0.min.js"><\/script>')</script>
<script src="/js/vendor/d3/d3.v3.min.js"></script>
<script src="/js/vendor/cycle.min.js"></script>
<script src="/js/vendor/handlebars.min.js"></script>
<script src="/js/vendor/lodash.min.js"></script>
<script src="/js/plugins.js"></script>
<script src="/js/main.js"></script>
<script>
var diameter = $('#dependency-counts-graph').width(),
    format = d3.format(",d");

var bubble = d3.layout.pack()
    .sort(null)
    .size([diameter, diameter])
    .padding(1.5);

var svg = d3.select("#dependency-counts-graph").append("svg")
    .attr("width", diameter)
    .attr("height", diameter)
    .attr("class", "bubble");

d3.json("dependency-counts.json", function(error, data) {
	
	// Get the max count
	var max = 1;
	for(var depName in data) {
		if(data[depName] > max) {
			max = data[depName];
		}
	}
	
	var color = d3.scale.linear().domain([1, max]).range(["#f0f0f0", "#737373"])
	
  var node = svg.selectAll(".node")
      .data(bubble.nodes(transformData(data))
      .filter(function(d) { return !d.children; })
      /*.filter(function(d) { return d.value > 1; })*/)
    .enter().append("g")
      .attr("class", "node")
      .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

  node.append("title")
      .text(function(d) { return d.depName + ": " + format(d.value); });

  node.append("circle")
      .attr("r", function(d) { return d.r; })
      .style("fill", function(d) { return color(d.value); });

  node.append("text")
      .attr("dy", ".3em")
      .style("text-anchor", "middle")
      .text(function(d) { return d.depName.substring(0, d.r / 3); });
});

function transformData(data) {
	var array = [];
	
	for(var depName in data) {
		array.push({depName: depName, value: data[depName]});
	}
	
	return {children: array};
}
</script>

<script>
	var _gaq=[['_setAccount','UA-38876227-1'],['_trackPageview']];
	(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
	g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
	s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
</body>
</html>